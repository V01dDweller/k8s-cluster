
# k8s-cluster

Use this project to create a 3-node Kubernetes cluster using local VirtualBox
virtual machines and Ansible.

Using the project and the automation it contains, a user should be able to:

1. Create three Ubuntu 22.04 (Jammy) virtual machines
1. Install `kubeadmin` on the host
1. Install Docker on each virtual machine
1. Configure one virtual machine as the master
1. Configure the remaining two virtual machines as worker nodes

A Vagrantfile is provided to automate creating the virtual machines with
Vagrant, and an Ansible playbook is provided to do everything else.

## Issues

* Stalls when `Joining nodes to the cluster` (Command just hangs)

* Errors in `/var/log/syslog` on nodes:

```txt
r/lib/kubelet/config.yaml, error failed to read kubelet config file \"/var/lib/kubelet/config.yaml\", error: open /var/lib/kubelet/config.yaml: no such file or directory, path: /var/lib/kubelet/config.yaml"
May  1 02:12:55 ubuntu-jammy systemd[1]: kubelet.service: Main process exited, code=exited, status=1/FAILURE
May  1 02:12:55 ubuntu-jammy systemd[1]: kubelet.service: Failed with result 'exit-code'.
May  1 02:13:05 ubuntu-jammy systemd[1]: kubelet.service: Scheduled restart job, restart counter is at 31.
May  1 02:13:05 ubuntu-jammy systemd[1]: Stopped kubelet: The Kubernetes Node Agent.
May  1 02:13:05 ubuntu-jammy systemd[1]: Started kubelet: The Kubernetes Node Agent.
May  1 02:13:05 ubuntu-jammy kubelet[6717]: E0501 02:13:05.424037    6717 run.go:74] "command failed" err="failed to load kubelet config file, error: failed to load Kubelet config file /var/lib/kubelet/config.yaml, error failed to read kubelet config file \"/var/lib/kubelet/config.yaml\", error: open /var/lib/kubelet/config.yaml: no such file or directory, path: /var/lib/kubelet/config.yaml"
May  1 02:13:05 ubuntu-jammy systemd[1]: kubelet.service: Main process exited, code=exited, status=1/FAILURE
May  1 02:13:05 ubuntu-jammy systemd[1]: kubelet.service: Failed with result 'exit-code'.
```

## Requirements

- VirtualBox
- Vagrant
- Ansible (Windows users, use a WSL2 instance with Ansible installed)

## Usage

#### MacOS/Linux

1. Open a terminal and clone the project
1. CD into the project directory
1. Issue a `vagrant up` to create the virtual machines
1. Run the playbook, e.g. `ansible-playbook k8s_install.yml`

#### Windows
1. Clone this project to the Desktop

1. Open a PowerShell and CD to the project directory, e.g.:

```txt
Windows PowerShell
Copyright (C) Microsoft Corporation. All rights reserved.

PS C:\Users\V01dDweller> cd .\Desktop\k8s-cluster\
PS C:\Users\V01dDweller\Desktop\k8s-cluster>
```

1. Issue the `vagrant up` command to create three virtual machines

1. Switch to a WSL2 instance and clone the project (yes, clone it again)

1. CD to the project directory

1. Run the `./vagrant_update.sh` script to copy the `.vagrant` directory
created by step 1. The `.vagrant` directory contains ssh keys for each virtual
machine. Ansible defaults to ssh connections and will use these keys.

1. Finally, run the playbook

```sh
ansible-playbook k8s_install.yml
```

<details>
<summary>Sample output:</summary>

```txt
PS C:\Users\V01dDweller\Desktop\k8s-project> vagrant up
Bringing machine 'k8s-master' up with 'virtualbox' provider...
Bringing machine 'k8s-node-1' up with 'virtualbox' provider...
Bringing machine 'k8s-node-2' up with 'virtualbox' provider...
==> k8s-master: Importing base box 'ubuntu/jammy64'...
==> k8s-master: Matching MAC address for NAT networking...
==> k8s-master: Checking if box 'ubuntu/jammy64' version '20230110.0.0' is up to date...
==> k8s-master: A newer version of the box 'ubuntu/jammy64' for provider 'virtualbox' is
==> k8s-master: available! You currently have version '20230110.0.0'. The latest is version
==> k8s-master: '20230428.0.0'. Run `vagrant box update` to update.
==> k8s-master: Setting the name of the VM: k8s-project_k8s-master_1682883735965_32537
==> k8s-master: Clearing any previously set network interfaces...
==> k8s-master: Preparing network interfaces based on configuration...
    k8s-master: Adapter 1: nat
    k8s-master: Adapter 2: hostonly
==> k8s-master: Forwarding ports...
    k8s-master: 22 (guest) => 2222 (host) (adapter 1)
==> k8s-master: Running 'pre-boot' VM customizations...
==> k8s-master: Booting VM...
==> k8s-master: Waiting for machine to boot. This may take a few minutes...
    k8s-master: SSH address: 127.0.0.1:2222
    k8s-master: SSH username: vagrant
    k8s-master: SSH auth method: private key
    k8s-master: Warning: Connection reset. Retrying...
    k8s-master:
    k8s-master: Vagrant insecure key detected. Vagrant will automatically replace
    k8s-master: this with a newly generated keypair for better security.
    k8s-master:
    k8s-master: Inserting generated public key within guest...
==> k8s-master: Machine booted and ready!
==> k8s-master: Checking for guest additions in VM...
    k8s-master: The guest additions on this VM do not match the installed version of
    k8s-master: VirtualBox! In most cases this is fine, but in rare cases it can
    k8s-master: prevent things such as shared folders from working properly. If you see
    k8s-master: shared folder errors, please make sure the guest additions within the
    k8s-master: virtual machine match the version of VirtualBox you have installed on
    k8s-master: your host and reload your VM.
    k8s-master:
    k8s-master: Guest Additions Version: 6.0.0 r127566
    k8s-master: VirtualBox Version: 7.0
==> k8s-master: Setting hostname...
==> k8s-master: Configuring and enabling network interfaces...
==> k8s-master: Mounting shared folders...
    k8s-master: /vagrant => C:/Users/V01dDweller/Desktop/k8s-project
==> k8s-node-1: Importing base box 'ubuntu/jammy64'...
==> k8s-node-1: Matching MAC address for NAT networking...
==> k8s-node-1: Checking if box 'ubuntu/jammy64' version '20230110.0.0' is up to date...
==> k8s-node-1: Setting the name of the VM: k8s-project_k8s-node-1_1682883786257_94054
==> k8s-node-1: Fixed port collision for 22 => 2222. Now on port 2200.
==> k8s-node-1: Clearing any previously set network interfaces...
==> k8s-node-1: Preparing network interfaces based on configuration...
    k8s-node-1: Adapter 1: nat
    k8s-node-1: Adapter 2: hostonly
==> k8s-node-1: Forwarding ports...
    k8s-node-1: 22 (guest) => 2200 (host) (adapter 1)
==> k8s-node-1: Running 'pre-boot' VM customizations...
==> k8s-node-1: Booting VM...
==> k8s-node-1: Waiting for machine to boot. This may take a few minutes...
    k8s-node-1: SSH address: 127.0.0.1:2200
    k8s-node-1: SSH username: vagrant
    k8s-node-1: SSH auth method: private key
    k8s-node-1: Warning: Connection aborted. Retrying...
    k8s-node-1: Warning: Connection reset. Retrying...
    k8s-node-1:
    k8s-node-1: Vagrant insecure key detected. Vagrant will automatically replace
    k8s-node-1: this with a newly generated keypair for better security.
    k8s-node-1:
    k8s-node-1: Inserting generated public key within guest...
==> k8s-node-1: Machine booted and ready!
==> k8s-node-1: Checking for guest additions in VM...
    k8s-node-1: The guest additions on this VM do not match the installed version of
    k8s-node-1: VirtualBox! In most cases this is fine, but in rare cases it can
    k8s-node-1: prevent things such as shared folders from working properly. If you see
    k8s-node-1: shared folder errors, please make sure the guest additions within the
    k8s-node-1: virtual machine match the version of VirtualBox you have installed on
    k8s-node-1: your host and reload your VM.
    k8s-node-1:
    k8s-node-1: Guest Additions Version: 6.0.0 r127566
    k8s-node-1: VirtualBox Version: 7.0
==> k8s-node-1: Setting hostname...
==> k8s-node-1: Configuring and enabling network interfaces...
==> k8s-node-1: Mounting shared folders...
    k8s-node-1: /vagrant => C:/Users/V01dDweller/Desktop/k8s-project
==> k8s-node-2: Importing base box 'ubuntu/jammy64'...
==> k8s-node-2: Matching MAC address for NAT networking...
==> k8s-node-2: Checking if box 'ubuntu/jammy64' version '20230110.0.0' is up to date...
==> k8s-node-2: Setting the name of the VM: k8s-project_k8s-node-2_1682883833830_2328
==> k8s-node-2: Fixed port collision for 22 => 2222. Now on port 2201.
==> k8s-node-2: Clearing any previously set network interfaces...
==> k8s-node-2: Preparing network interfaces based on configuration...
    k8s-node-2: Adapter 1: nat
    k8s-node-2: Adapter 2: hostonly
==> k8s-node-2: Forwarding ports...
    k8s-node-2: 22 (guest) => 2201 (host) (adapter 1)
==> k8s-node-2: Running 'pre-boot' VM customizations...
==> k8s-node-2: Booting VM...
==> k8s-node-2: Waiting for machine to boot. This may take a few minutes...
    k8s-node-2: SSH address: 127.0.0.1:2201
    k8s-node-2: SSH username: vagrant
    k8s-node-2: SSH auth method: private key
    k8s-node-2:
    k8s-node-2: Vagrant insecure key detected. Vagrant will automatically replace
    k8s-node-2: this with a newly generated keypair for better security.
    k8s-node-2:
    k8s-node-2: Inserting generated public key within guest...
==> k8s-node-2: Machine booted and ready!
==> k8s-node-2: Checking for guest additions in VM...
    k8s-node-2: The guest additions on this VM do not match the installed version of
    k8s-node-2: VirtualBox! In most cases this is fine, but in rare cases it can
    k8s-node-2: prevent things such as shared folders from working properly. If you see
    k8s-node-2: shared folder errors, please make sure the guest additions within the
    k8s-node-2: virtual machine match the version of VirtualBox you have installed on
    k8s-node-2: your host and reload your VM.
    k8s-node-2:
    k8s-node-2: Guest Additions Version: 6.0.0 r127566
    k8s-node-2: VirtualBox Version: 7.0
==> k8s-node-2: Setting hostname...
==> k8s-node-2: Configuring and enabling network interfaces...
==> k8s-node-2: Mounting shared folders...
    k8s-node-2: /vagrant => C:/Users/V01dDweller/Desktop/k8s-project
PS C:\Users\V01dDweller\Desktop\k8s-project> vagrant box update
==> k8s-node-2: Checking for updates to 'ubuntu/jammy64'
    k8s-node-2: Latest installed version: 20230110.0.0
    k8s-node-2: Version constraints:
    k8s-node-2: Provider: virtualbox
==> k8s-node-2: Updating 'ubuntu/jammy64' with provider 'virtualbox' from version
==> k8s-node-2: '20230110.0.0' to '20230428.0.0'...
==> k8s-node-2: Loading metadata for box 'https://vagrantcloud.com/ubuntu/jammy64'
==> k8s-node-2: Adding box 'ubuntu/jammy64' (v20230428.0.0) for provider: virtualbox
    k8s-node-2: Downloading: https://vagrantcloud.com/ubuntu/boxes/jammy64/versions/20230428.0.0/providers/virtualbox.box
Download redirected to host: cloud-images.ubuntu.com
    k8s-node-2:
==> k8s-node-2: Successfully added box 'ubuntu/jammy64' (v20230428.0.0) for 'virtualbox'!
PS C:\Users\V01dDweller\Desktop\k8s-project> vagrant destroy --force
==> k8s-node-2: Forcing shutdown of VM...
==> k8s-node-2: Destroying VM and associated drives...
==> k8s-node-1: Forcing shutdown of VM...
==> k8s-node-1: Destroying VM and associated drives...
==> k8s-master: Forcing shutdown of VM...
==> k8s-master: Destroying VM and associated drives...
PS C:\Users\V01dDweller\Desktop\k8s-project> vagrant up
Bringing machine 'k8s-master' up with 'virtualbox' provider...
Bringing machine 'k8s-node-1' up with 'virtualbox' provider...
Bringing machine 'k8s-node-2' up with 'virtualbox' provider...
==> k8s-master: Importing base box 'ubuntu/jammy64'...
==> k8s-master: Matching MAC address for NAT networking...
==> k8s-master: Checking if box 'ubuntu/jammy64' version '20230428.0.0' is up to date...
==> k8s-master: Setting the name of the VM: k8s-project_k8s-master_1682886271647_79209
==> k8s-master: Clearing any previously set network interfaces...
==> k8s-master: Preparing network interfaces based on configuration...
    k8s-master: Adapter 1: nat
    k8s-master: Adapter 2: hostonly
==> k8s-master: Forwarding ports...
    k8s-master: 22 (guest) => 2222 (host) (adapter 1)
==> k8s-master: Running 'pre-boot' VM customizations...
==> k8s-master: Booting VM...
==> k8s-master: Waiting for machine to boot. This may take a few minutes...
    k8s-master: SSH address: 127.0.0.1:2222
    k8s-master: SSH username: vagrant
    k8s-master: SSH auth method: private key
    k8s-master: Warning: Connection aborted. Retrying...
    k8s-master: Warning: Connection reset. Retrying...
    k8s-master:
    k8s-master: Vagrant insecure key detected. Vagrant will automatically replace
    k8s-master: this with a newly generated keypair for better security.
    k8s-master:
    k8s-master: Inserting generated public key within guest...
==> k8s-master: Machine booted and ready!
==> k8s-master: Checking for guest additions in VM...
    k8s-master: The guest additions on this VM do not match the installed version of
    k8s-master: VirtualBox! In most cases this is fine, but in rare cases it can
    k8s-master: prevent things such as shared folders from working properly. If you see
    k8s-master: shared folder errors, please make sure the guest additions within the
    k8s-master: virtual machine match the version of VirtualBox you have installed on
    k8s-master: your host and reload your VM.
    k8s-master:
    k8s-master: Guest Additions Version: 6.0.0 r127566
    k8s-master: VirtualBox Version: 7.0
==> k8s-master: Setting hostname...
==> k8s-master: Configuring and enabling network interfaces...
==> k8s-master: Mounting shared folders...
    k8s-master: /vagrant => C:/Users/V01dDweller/Desktop/k8s-project
==> k8s-node-1: Importing base box 'ubuntu/jammy64'...
==> k8s-node-1: Matching MAC address for NAT networking...
==> k8s-node-1: Checking if box 'ubuntu/jammy64' version '20230428.0.0' is up to date...
==> k8s-node-1: Setting the name of the VM: k8s-project_k8s-node-1_1682886318808_8852
==> k8s-node-1: Fixed port collision for 22 => 2222. Now on port 2200.
==> k8s-node-1: Clearing any previously set network interfaces...
==> k8s-node-1: Preparing network interfaces based on configuration...
    k8s-node-1: Adapter 1: nat
    k8s-node-1: Adapter 2: hostonly
==> k8s-node-1: Forwarding ports...
    k8s-node-1: 22 (guest) => 2200 (host) (adapter 1)
==> k8s-node-1: Running 'pre-boot' VM customizations...
==> k8s-node-1: Booting VM...
==> k8s-node-1: Waiting for machine to boot. This may take a few minutes...
    k8s-node-1: SSH address: 127.0.0.1:2200
    k8s-node-1: SSH username: vagrant
    k8s-node-1: SSH auth method: private key
    k8s-node-1:
    k8s-node-1: Vagrant insecure key detected. Vagrant will automatically replace
    k8s-node-1: this with a newly generated keypair for better security.
    k8s-node-1:
    k8s-node-1: Inserting generated public key within guest...
==> k8s-node-1: Machine booted and ready!
==> k8s-node-1: Checking for guest additions in VM...
    k8s-node-1: The guest additions on this VM do not match the installed version of
    k8s-node-1: VirtualBox! In most cases this is fine, but in rare cases it can
    k8s-node-1: prevent things such as shared folders from working properly. If you see
    k8s-node-1: shared folder errors, please make sure the guest additions within the
    k8s-node-1: virtual machine match the version of VirtualBox you have installed on
    k8s-node-1: your host and reload your VM.
    k8s-node-1:
    k8s-node-1: Guest Additions Version: 6.0.0 r127566
    k8s-node-1: VirtualBox Version: 7.0
==> k8s-node-1: Setting hostname...
==> k8s-node-1: Configuring and enabling network interfaces...
==> k8s-node-1: Mounting shared folders...
    k8s-node-1: /vagrant => C:/Users/V01dDweller/Desktop/k8s-project
==> k8s-node-2: Importing base box 'ubuntu/jammy64'...
==> k8s-node-2: Matching MAC address for NAT networking...
==> k8s-node-2: Checking if box 'ubuntu/jammy64' version '20230428.0.0' is up to date...
==> k8s-node-2: Setting the name of the VM: k8s-project_k8s-node-2_1682886370597_42975
==> k8s-node-2: Fixed port collision for 22 => 2222. Now on port 2201.
==> k8s-node-2: Clearing any previously set network interfaces...
==> k8s-node-2: Preparing network interfaces based on configuration...
    k8s-node-2: Adapter 1: nat
    k8s-node-2: Adapter 2: hostonly
==> k8s-node-2: Forwarding ports...
    k8s-node-2: 22 (guest) => 2201 (host) (adapter 1)
==> k8s-node-2: Running 'pre-boot' VM customizations...
==> k8s-node-2: Booting VM...
==> k8s-node-2: Waiting for machine to boot. This may take a few minutes...
    k8s-node-2: SSH address: 127.0.0.1:2201
    k8s-node-2: SSH username: vagrant
    k8s-node-2: SSH auth method: private key
    k8s-node-2: Warning: Connection reset. Retrying...
    k8s-node-2: Warning: Connection aborted. Retrying...
    k8s-node-2:
    k8s-node-2: Vagrant insecure key detected. Vagrant will automatically replace
    k8s-node-2: this with a newly generated keypair for better security.
    k8s-node-2:
    k8s-node-2: Inserting generated public key within guest...
==> k8s-node-2: Machine booted and ready!
==> k8s-node-2: Checking for guest additions in VM...
    k8s-node-2: The guest additions on this VM do not match the installed version of
    k8s-node-2: VirtualBox! In most cases this is fine, but in rare cases it can
    k8s-node-2: prevent things such as shared folders from working properly. If you see
    k8s-node-2: shared folder errors, please make sure the guest additions within the
    k8s-node-2: virtual machine match the version of VirtualBox you have installed on
    k8s-node-2: your host and reload your VM.
    k8s-node-2:
    k8s-node-2: Guest Additions Version: 6.0.0 r127566
    k8s-node-2: VirtualBox Version: 7.0
==> k8s-node-2: Setting hostname...
==> k8s-node-2: Configuring and enabling network interfaces...
==> k8s-node-2: Mounting shared folders...
    k8s-node-2: /vagrant => C:/Users/V01dDweller/Desktop/k8s-project
PS C:\Users\V01dDweller\Desktop\k8s-project> vagrant destroy --force
==> k8s-node-2: Forcing shutdown of VM...
==> k8s-node-2: Destroying VM and associated drives...
==> k8s-node-1: Forcing shutdown of VM...
==> k8s-node-1: Destroying VM and associated drives...
==> k8s-master: Forcing shutdown of VM...
==> k8s-master: Destroying VM and associated drives...
PS C:\Users\V01dDweller\Desktop\k8s-project> vagrant up
Bringing machine 'k8s-master' up with 'virtualbox' provider...
Bringing machine 'k8s-node-1' up with 'virtualbox' provider...
Bringing machine 'k8s-node-2' up with 'virtualbox' provider...
==> k8s-master: Importing base box 'ubuntu/jammy64'...
==> k8s-master: Matching MAC address for NAT networking...
==> k8s-master: Checking if box 'ubuntu/jammy64' version '20230428.0.0' is up to date...
==> k8s-master: Setting the name of the VM: k8s-project_k8s-master_1682886677320_64880
==> k8s-master: Clearing any previously set network interfaces...
==> k8s-master: Preparing network interfaces based on configuration...
    k8s-master: Adapter 1: nat
    k8s-master: Adapter 2: hostonly
==> k8s-master: Forwarding ports...
    k8s-master: 22 (guest) => 2222 (host) (adapter 1)
==> k8s-master: Running 'pre-boot' VM customizations...
==> k8s-master: Booting VM...
==> k8s-master: Waiting for machine to boot. This may take a few minutes...
    k8s-master: SSH address: 127.0.0.1:2222
    k8s-master: SSH username: vagrant
    k8s-master: SSH auth method: private key
    k8s-master: Warning: Connection reset. Retrying...
    k8s-master: Warning: Connection aborted. Retrying...
    k8s-master:
    k8s-master: Vagrant insecure key detected. Vagrant will automatically replace
    k8s-master: this with a newly generated keypair for better security.
    k8s-master:
    k8s-master: Inserting generated public key within guest...
==> k8s-master: Machine booted and ready!
==> k8s-master: Checking for guest additions in VM...
    k8s-master: The guest additions on this VM do not match the installed version of
    k8s-master: VirtualBox! In most cases this is fine, but in rare cases it can
    k8s-master: prevent things such as shared folders from working properly. If you see
    k8s-master: shared folder errors, please make sure the guest additions within the
    k8s-master: virtual machine match the version of VirtualBox you have installed on
    k8s-master: your host and reload your VM.
    k8s-master:
    k8s-master: Guest Additions Version: 6.0.0 r127566
    k8s-master: VirtualBox Version: 7.0
==> k8s-master: Setting hostname...
==> k8s-master: Configuring and enabling network interfaces...
==> k8s-master: Mounting shared folders...
    k8s-master: /vagrant => C:/Users/V01dDweller/Desktop/k8s-project
==> k8s-node-1: Importing base box 'ubuntu/jammy64'...
==> k8s-node-1: Matching MAC address for NAT networking...
==> k8s-node-1: Checking if box 'ubuntu/jammy64' version '20230428.0.0' is up to date...
==> k8s-node-1: Setting the name of the VM: k8s-project_k8s-node-1_1682886730752_2311
==> k8s-node-1: Fixed port collision for 22 => 2222. Now on port 2200.
==> k8s-node-1: Clearing any previously set network interfaces...
==> k8s-node-1: Preparing network interfaces based on configuration...
    k8s-node-1: Adapter 1: nat
    k8s-node-1: Adapter 2: hostonly
==> k8s-node-1: Forwarding ports...
    k8s-node-1: 22 (guest) => 2200 (host) (adapter 1)
==> k8s-node-1: Running 'pre-boot' VM customizations...
==> k8s-node-1: Booting VM...
==> k8s-node-1: Waiting for machine to boot. This may take a few minutes...
    k8s-node-1: SSH address: 127.0.0.1:2200
    k8s-node-1: SSH username: vagrant
    k8s-node-1: SSH auth method: private key
    k8s-node-1: Warning: Connection reset. Retrying...
    k8s-node-1: Warning: Connection aborted. Retrying...
    k8s-node-1:
    k8s-node-1: Vagrant insecure key detected. Vagrant will automatically replace
    k8s-node-1: this with a newly generated keypair for better security.
    k8s-node-1:
    k8s-node-1: Inserting generated public key within guest...
==> k8s-node-1: Machine booted and ready!
==> k8s-node-1: Checking for guest additions in VM...
    k8s-node-1: The guest additions on this VM do not match the installed version of
    k8s-node-1: VirtualBox! In most cases this is fine, but in rare cases it can
    k8s-node-1: prevent things such as shared folders from working properly. If you see
    k8s-node-1: shared folder errors, please make sure the guest additions within the
    k8s-node-1: virtual machine match the version of VirtualBox you have installed on
    k8s-node-1: your host and reload your VM.
    k8s-node-1:
    k8s-node-1: Guest Additions Version: 6.0.0 r127566
    k8s-node-1: VirtualBox Version: 7.0
==> k8s-node-1: Setting hostname...
==> k8s-node-1: Configuring and enabling network interfaces...
==> k8s-node-1: Mounting shared folders...
    k8s-node-1: /vagrant => C:/Users/V01dDweller/Desktop/k8s-project
==> k8s-node-2: Importing base box 'ubuntu/jammy64'...
==> k8s-node-2: Matching MAC address for NAT networking...
==> k8s-node-2: Checking if box 'ubuntu/jammy64' version '20230428.0.0' is up to date...
==> k8s-node-2: Setting the name of the VM: k8s-project_k8s-node-2_1682886785332_21447
==> k8s-node-2: Fixed port collision for 22 => 2222. Now on port 2201.
==> k8s-node-2: Clearing any previously set network interfaces...
==> k8s-node-2: Preparing network interfaces based on configuration...
    k8s-node-2: Adapter 1: nat
    k8s-node-2: Adapter 2: hostonly
==> k8s-node-2: Forwarding ports...
    k8s-node-2: 22 (guest) => 2201 (host) (adapter 1)
==> k8s-node-2: Running 'pre-boot' VM customizations...
==> k8s-node-2: Booting VM...
==> k8s-node-2: Waiting for machine to boot. This may take a few minutes...
    k8s-node-2: SSH address: 127.0.0.1:2201
    k8s-node-2: SSH username: vagrant
    k8s-node-2: SSH auth method: private key
    k8s-node-2:
    k8s-node-2: Vagrant insecure key detected. Vagrant will automatically replace
    k8s-node-2: this with a newly generated keypair for better security.
    k8s-node-2:
    k8s-node-2: Inserting generated public key within guest...
==> k8s-node-2: Machine booted and ready!
==> k8s-node-2: Checking for guest additions in VM...
    k8s-node-2: The guest additions on this VM do not match the installed version of
    k8s-node-2: VirtualBox! In most cases this is fine, but in rare cases it can
    k8s-node-2: prevent things such as shared folders from working properly. If you see
    k8s-node-2: shared folder errors, please make sure the guest additions within the
    k8s-node-2: virtual machine match the version of VirtualBox you have installed on
    k8s-node-2: your host and reload your VM.
    k8s-node-2:
    k8s-node-2: Guest Additions Version: 6.0.0 r127566
    k8s-node-2: VirtualBox Version: 7.0
==> k8s-node-2: Setting hostname...
==> k8s-node-2: Configuring and enabling network interfaces...
==> k8s-node-2: Mounting shared folders...
    k8s-node-2: /vagrant => C:/Users/V01dDweller/Desktop/k8s-project
PS C:\Users\V01dDweller\Desktop\k8s-project> vagrant destroy --force
==> k8s-node-2: Forcing shutdown of VM...
==> k8s-node-2: Destroying VM and associated drives...
==> k8s-node-1: Forcing shutdown of VM...
==> k8s-node-1: Destroying VM and associated drives...
==> k8s-master: Forcing shutdown of VM...
==> k8s-master: Destroying VM and associated drives...
PS C:\Users\V01dDweller\Desktop\k8s-project> vagrant validate
Vagrantfile validated successfully.
PS C:\Users\V01dDweller\Desktop\k8s-project> vagrant up
Bringing machine 'k8s-master' up with 'virtualbox' provider...
Bringing machine 'k8s-node-1' up with 'virtualbox' provider...
Bringing machine 'k8s-node-2' up with 'virtualbox' provider...
==> k8s-master: Importing base box 'ubuntu/jammy64'...
==> k8s-master: Matching MAC address for NAT networking...
==> k8s-master: Checking if box 'ubuntu/jammy64' version '20230428.0.0' is up to date...
==> k8s-master: Setting the name of the VM: k8s-project_k8s-master_1682886916752_86915
==> k8s-master: Clearing any previously set network interfaces...
==> k8s-master: Preparing network interfaces based on configuration...
    k8s-master: Adapter 1: nat
    k8s-master: Adapter 2: hostonly
==> k8s-master: Forwarding ports...
    k8s-master: 22 (guest) => 2222 (host) (adapter 1)
==> k8s-master: Running 'pre-boot' VM customizations...
==> k8s-master: Booting VM...
==> k8s-master: Waiting for machine to boot. This may take a few minutes...
    k8s-master: SSH address: 127.0.0.1:2222
    k8s-master: SSH username: vagrant
    k8s-master: SSH auth method: private key
    k8s-master: Warning: Connection reset. Retrying...
    k8s-master: Warning: Connection aborted. Retrying...
    k8s-master:
    k8s-master: Vagrant insecure key detected. Vagrant will automatically replace
    k8s-master: this with a newly generated keypair for better security.
    k8s-master:
    k8s-master: Inserting generated public key within guest...
==> k8s-master: Machine booted and ready!
==> k8s-master: Checking for guest additions in VM...
    k8s-master: The guest additions on this VM do not match the installed version of
    k8s-master: VirtualBox! In most cases this is fine, but in rare cases it can
    k8s-master: prevent things such as shared folders from working properly. If you see
    k8s-master: shared folder errors, please make sure the guest additions within the
    k8s-master: virtual machine match the version of VirtualBox you have installed on
    k8s-master: your host and reload your VM.
    k8s-master:
    k8s-master: Guest Additions Version: 6.0.0 r127566
    k8s-master: VirtualBox Version: 7.0
==> k8s-master: Setting hostname...
==> k8s-master: Configuring and enabling network interfaces...
==> k8s-master: Mounting shared folders...
    k8s-master: /vagrant => C:/Users/V01dDweller/Desktop/k8s-project
==> k8s-node-1: Importing base box 'ubuntu/jammy64'...
==> k8s-node-1: Matching MAC address for NAT networking...
==> k8s-node-1: Checking if box 'ubuntu/jammy64' version '20230428.0.0' is up to date...
==> k8s-node-1: Setting the name of the VM: k8s-project_k8s-node-1_1682886971831_75365
==> k8s-node-1: Fixed port collision for 22 => 2222. Now on port 2200.
==> k8s-node-1: Clearing any previously set network interfaces...
==> k8s-node-1: Preparing network interfaces based on configuration...
    k8s-node-1: Adapter 1: nat
    k8s-node-1: Adapter 2: hostonly
==> k8s-node-1: Forwarding ports...
    k8s-node-1: 22 (guest) => 2200 (host) (adapter 1)
==> k8s-node-1: Running 'pre-boot' VM customizations...
==> k8s-node-1: Booting VM...
==> k8s-node-1: Waiting for machine to boot. This may take a few minutes...
    k8s-node-1: SSH address: 127.0.0.1:2200
    k8s-node-1: SSH username: vagrant
    k8s-node-1: SSH auth method: private key
    k8s-node-1: Warning: Connection reset. Retrying...
    k8s-node-1: Warning: Connection aborted. Retrying...
    k8s-node-1:
    k8s-node-1: Vagrant insecure key detected. Vagrant will automatically replace
    k8s-node-1: this with a newly generated keypair for better security.
    k8s-node-1:
    k8s-node-1: Inserting generated public key within guest...
==> k8s-node-1: Machine booted and ready!
==> k8s-node-1: Checking for guest additions in VM...
    k8s-node-1: The guest additions on this VM do not match the installed version of
    k8s-node-1: VirtualBox! In most cases this is fine, but in rare cases it can
    k8s-node-1: prevent things such as shared folders from working properly. If you see
    k8s-node-1: shared folder errors, please make sure the guest additions within the
    k8s-node-1: virtual machine match the version of VirtualBox you have installed on
    k8s-node-1: your host and reload your VM.
    k8s-node-1:
    k8s-node-1: Guest Additions Version: 6.0.0 r127566
    k8s-node-1: VirtualBox Version: 7.0
==> k8s-node-1: Setting hostname...
==> k8s-node-1: Configuring and enabling network interfaces...
==> k8s-node-1: Mounting shared folders...
    k8s-node-1: /vagrant => C:/Users/V01dDweller/Desktop/k8s-project
==> k8s-node-2: Importing base box 'ubuntu/jammy64'...
==> k8s-node-2: Matching MAC address for NAT networking...
==> k8s-node-2: Checking if box 'ubuntu/jammy64' version '20230428.0.0' is up to date...
==> k8s-node-2: Setting the name of the VM: k8s-project_k8s-node-2_1682887027099_17724
==> k8s-node-2: Fixed port collision for 22 => 2222. Now on port 2201.
==> k8s-node-2: Clearing any previously set network interfaces...
==> k8s-node-2: Preparing network interfaces based on configuration...
    k8s-node-2: Adapter 1: nat
    k8s-node-2: Adapter 2: hostonly
==> k8s-node-2: Forwarding ports...
    k8s-node-2: 22 (guest) => 2201 (host) (adapter 1)
==> k8s-node-2: Running 'pre-boot' VM customizations...
==> k8s-node-2: Booting VM...
==> k8s-node-2: Waiting for machine to boot. This may take a few minutes...
    k8s-node-2: SSH address: 127.0.0.1:2201
    k8s-node-2: SSH username: vagrant
    k8s-node-2: SSH auth method: private key
    k8s-node-2: Warning: Connection reset. Retrying...
    k8s-node-2: Warning: Connection aborted. Retrying...
    k8s-node-2:
    k8s-node-2: Vagrant insecure key detected. Vagrant will automatically replace
    k8s-node-2: this with a newly generated keypair for better security.
    k8s-node-2:
    k8s-node-2: Inserting generated public key within guest...
==> k8s-node-2: Machine booted and ready!
==> k8s-node-2: Checking for guest additions in VM...
    k8s-node-2: The guest additions on this VM do not match the installed version of
    k8s-node-2: VirtualBox! In most cases this is fine, but in rare cases it can
    k8s-node-2: prevent things such as shared folders from working properly. If you see
    k8s-node-2: shared folder errors, please make sure the guest additions within the
    k8s-node-2: virtual machine match the version of VirtualBox you have installed on
    k8s-node-2: your host and reload your VM.
    k8s-node-2:
    k8s-node-2: Guest Additions Version: 6.0.0 r127566
    k8s-node-2: VirtualBox Version: 7.0
==> k8s-node-2: Setting hostname...
==> k8s-node-2: Configuring and enabling network interfaces...
==> k8s-node-2: Mounting shared folders...
    k8s-node-2: /vagrant => C:/Users/V01dDweller/Desktop/k8s-project
PS C:\Users\V01dDweller\Desktop\k8s-project> vagrant reload
==> k8s-master: Attempting graceful shutdown of VM...
==> k8s-master: Checking if box 'ubuntu/jammy64' version '20230428.0.0' is up to date...
==> k8s-master: Clearing any previously set forwarded ports...
==> k8s-master: Clearing any previously set network interfaces...
==> k8s-master: Preparing network interfaces based on configuration...
    k8s-master: Adapter 1: nat
    k8s-master: Adapter 2: hostonly
==> k8s-master: Forwarding ports...
    k8s-master: 22 (guest) => 2222 (host) (adapter 1)
==> k8s-master: Running 'pre-boot' VM customizations...
==> k8s-master: Booting VM...
==> k8s-master: Waiting for machine to boot. This may take a few minutes...
    k8s-master: SSH address: 127.0.0.1:2222
    k8s-master: SSH username: vagrant
    k8s-master: SSH auth method: private key
    k8s-master: Warning: Connection reset. Retrying...
    k8s-master: Warning: Connection aborted. Retrying...
    k8s-master: Warning: Connection reset. Retrying...
    k8s-master: Warning: Connection aborted. Retrying...
==> k8s-master: Machine booted and ready!
==> k8s-master: Checking for guest additions in VM...
    k8s-master: The guest additions on this VM do not match the installed version of
    k8s-master: VirtualBox! In most cases this is fine, but in rare cases it can
    k8s-master: prevent things such as shared folders from working properly. If you see
    k8s-master: shared folder errors, please make sure the guest additions within the
    k8s-master: virtual machine match the version of VirtualBox you have installed on
    k8s-master: your host and reload your VM.
    k8s-master:
    k8s-master: Guest Additions Version: 6.0.0 r127566
    k8s-master: VirtualBox Version: 7.0
==> k8s-master: Setting hostname...
==> k8s-master: Configuring and enabling network interfaces...
==> k8s-master: Mounting shared folders...
    k8s-master: /vagrant => C:/Users/V01dDweller/Desktop/k8s-project
==> k8s-master: Machine already provisioned. Run `vagrant provision` or use the `--provision`
==> k8s-master: flag to force provisioning. Provisioners marked to run always will still run.
==> k8s-node-1: Attempting graceful shutdown of VM...
==> k8s-node-1: Checking if box 'ubuntu/jammy64' version '20230428.0.0' is up to date...
==> k8s-node-1: Clearing any previously set forwarded ports...
==> k8s-node-1: Fixed port collision for 22 => 2222. Now on port 2200.
==> k8s-node-1: Clearing any previously set network interfaces...
==> k8s-node-1: Preparing network interfaces based on configuration...
    k8s-node-1: Adapter 1: nat
    k8s-node-1: Adapter 2: hostonly
==> k8s-node-1: Forwarding ports...
    k8s-node-1: 22 (guest) => 2200 (host) (adapter 1)
==> k8s-node-1: Running 'pre-boot' VM customizations...
==> k8s-node-1: Booting VM...
==> k8s-node-1: Waiting for machine to boot. This may take a few minutes...
    k8s-node-1: SSH address: 127.0.0.1:2200
    k8s-node-1: SSH username: vagrant
    k8s-node-1: SSH auth method: private key
    k8s-node-1: Warning: Connection reset. Retrying...
    k8s-node-1: Warning: Connection aborted. Retrying...
    k8s-node-1: Warning: Connection reset. Retrying...
    k8s-node-1: Warning: Connection aborted. Retrying...
==> k8s-node-1: Machine booted and ready!
==> k8s-node-1: Checking for guest additions in VM...
    k8s-node-1: The guest additions on this VM do not match the installed version of
    k8s-node-1: VirtualBox! In most cases this is fine, but in rare cases it can
    k8s-node-1: prevent things such as shared folders from working properly. If you see
    k8s-node-1: shared folder errors, please make sure the guest additions within the
    k8s-node-1: virtual machine match the version of VirtualBox you have installed on
    k8s-node-1: your host and reload your VM.
    k8s-node-1:
    k8s-node-1: Guest Additions Version: 6.0.0 r127566
    k8s-node-1: VirtualBox Version: 7.0
==> k8s-node-1: Setting hostname...
==> k8s-node-1: Configuring and enabling network interfaces...
==> k8s-node-1: Mounting shared folders...
    k8s-node-1: /vagrant => C:/Users/V01dDweller/Desktop/k8s-project
==> k8s-node-1: Machine already provisioned. Run `vagrant provision` or use the `--provision`
==> k8s-node-1: flag to force provisioning. Provisioners marked to run always will still run.
==> k8s-node-2: Attempting graceful shutdown of VM...
==> k8s-node-2: Checking if box 'ubuntu/jammy64' version '20230428.0.0' is up to date...
==> k8s-node-2: Clearing any previously set forwarded ports...
==> k8s-node-2: Fixed port collision for 22 => 2222. Now on port 2201.
==> k8s-node-2: Clearing any previously set network interfaces...
==> k8s-node-2: Preparing network interfaces based on configuration...
    k8s-node-2: Adapter 1: nat
    k8s-node-2: Adapter 2: hostonly
==> k8s-node-2: Forwarding ports...
    k8s-node-2: 22 (guest) => 2201 (host) (adapter 1)
==> k8s-node-2: Running 'pre-boot' VM customizations...
==> k8s-node-2: Booting VM...
==> k8s-node-2: Waiting for machine to boot. This may take a few minutes...
    k8s-node-2: SSH address: 127.0.0.1:2201
    k8s-node-2: SSH username: vagrant
    k8s-node-2: SSH auth method: private key
    k8s-node-2: Warning: Connection reset. Retrying...
    k8s-node-2: Warning: Connection aborted. Retrying...
    k8s-node-2: Warning: Connection reset. Retrying...
==> k8s-node-2: Machine booted and ready!
==> k8s-node-2: Checking for guest additions in VM...
    k8s-node-2: The guest additions on this VM do not match the installed version of
    k8s-node-2: VirtualBox! In most cases this is fine, but in rare cases it can
    k8s-node-2: prevent things such as shared folders from working properly. If you see
    k8s-node-2: shared folder errors, please make sure the guest additions within the
    k8s-node-2: virtual machine match the version of VirtualBox you have installed on
    k8s-node-2: your host and reload your VM.
    k8s-node-2:
    k8s-node-2: Guest Additions Version: 6.0.0 r127566
    k8s-node-2: VirtualBox Version: 7.0
==> k8s-node-2: Setting hostname...
==> k8s-node-2: Configuring and enabling network interfaces...
==> k8s-node-2: Mounting shared folders...
    k8s-node-2: /vagrant => C:/Users/V01dDweller/Desktop/k8s-project
==> k8s-node-2: Machine already provisioned. Run `vagrant provision` or use the `--provision`
==> k8s-node-2: flag to force provisioning. Provisioners marked to run always will still run.
PS C:\Users\V01dDweller\Desktop\k8s-project> vagrant destroy --force
==> k8s-node-2: Forcing shutdown of VM...
==> k8s-node-2: Destroying VM and associated drives...
==> k8s-node-1: Forcing shutdown of VM...
==> k8s-node-1: Destroying VM and associated drives...
==> k8s-master: Forcing shutdown of VM...
==> k8s-master: Destroying VM and associated drives...
PS C:\Users\V01dDweller\Desktop\k8s-project> vagrant up
Bringing machine 'k8s-master' up with 'virtualbox' provider...
Bringing machine 'k8s-node-1' up with 'virtualbox' provider...
Bringing machine 'k8s-node-2' up with 'virtualbox' provider...
==> k8s-master: Importing base box 'ubuntu/jammy64'...
==> k8s-master: Matching MAC address for NAT networking...
==> k8s-master: Checking if box 'ubuntu/jammy64' version '20230428.0.0' is up to date...
==> k8s-master: Setting the name of the VM: k8s-project_k8s-master_1682904581049_36818
==> k8s-master: Clearing any previously set network interfaces...
==> k8s-master: Preparing network interfaces based on configuration...
    k8s-master: Adapter 1: nat
    k8s-master: Adapter 2: hostonly
==> k8s-master: Forwarding ports...
    k8s-master: 22 (guest) => 2222 (host) (adapter 1)
==> k8s-master: Running 'pre-boot' VM customizations...
==> k8s-master: Booting VM...
==> k8s-master: Waiting for machine to boot. This may take a few minutes...
    k8s-master: SSH address: 127.0.0.1:2222
    k8s-master: SSH username: vagrant
    k8s-master: SSH auth method: private key
    k8s-master: Warning: Connection reset. Retrying...
    k8s-master: Warning: Connection aborted. Retrying...
    k8s-master:
    k8s-master: Vagrant insecure key detected. Vagrant will automatically replace
    k8s-master: this with a newly generated keypair for better security.
    k8s-master:
    k8s-master: Inserting generated public key within guest...
==> k8s-master: Machine booted and ready!
==> k8s-master: Checking for guest additions in VM...
    k8s-master: The guest additions on this VM do not match the installed version of
    k8s-master: VirtualBox! In most cases this is fine, but in rare cases it can
    k8s-master: prevent things such as shared folders from working properly. If you see
    k8s-master: shared folder errors, please make sure the guest additions within the
    k8s-master: virtual machine match the version of VirtualBox you have installed on
    k8s-master: your host and reload your VM.
    k8s-master:
    k8s-master: Guest Additions Version: 6.0.0 r127566
    k8s-master: VirtualBox Version: 7.0
==> k8s-master: Setting hostname...
==> k8s-master: Configuring and enabling network interfaces...
==> k8s-master: Mounting shared folders...
    k8s-master: /vagrant => C:/Users/V01dDweller/Desktop/k8s-project
==> k8s-node-1: Importing base box 'ubuntu/jammy64'...
==> k8s-node-1: Matching MAC address for NAT networking...
==> k8s-node-1: Checking if box 'ubuntu/jammy64' version '20230428.0.0' is up to date...
==> k8s-node-1: Setting the name of the VM: k8s-project_k8s-node-1_1682904645554_35673
==> k8s-node-1: Fixed port collision for 22 => 2222. Now on port 2200.
==> k8s-node-1: Clearing any previously set network interfaces...
==> k8s-node-1: Preparing network interfaces based on configuration...
    k8s-node-1: Adapter 1: nat
    k8s-node-1: Adapter 2: hostonly
==> k8s-node-1: Forwarding ports...
    k8s-node-1: 22 (guest) => 2200 (host) (adapter 1)
==> k8s-node-1: Running 'pre-boot' VM customizations...
==> k8s-node-1: Booting VM...
==> k8s-node-1: Waiting for machine to boot. This may take a few minutes...
    k8s-node-1: SSH address: 127.0.0.1:2200
    k8s-node-1: SSH username: vagrant
    k8s-node-1: SSH auth method: private key
    k8s-node-1: Warning: Connection reset. Retrying...
    k8s-node-1:
    k8s-node-1: Vagrant insecure key detected. Vagrant will automatically replace
    k8s-node-1: this with a newly generated keypair for better security.
    k8s-node-1:
    k8s-node-1: Inserting generated public key within guest...
==> k8s-node-1: Machine booted and ready!
==> k8s-node-1: Checking for guest additions in VM...
    k8s-node-1: The guest additions on this VM do not match the installed version of
    k8s-node-1: VirtualBox! In most cases this is fine, but in rare cases it can
    k8s-node-1: prevent things such as shared folders from working properly. If you see
    k8s-node-1: shared folder errors, please make sure the guest additions within the
    k8s-node-1: virtual machine match the version of VirtualBox you have installed on
    k8s-node-1: your host and reload your VM.
    k8s-node-1:
    k8s-node-1: Guest Additions Version: 6.0.0 r127566
    k8s-node-1: VirtualBox Version: 7.0
==> k8s-node-1: Setting hostname...
==> k8s-node-1: Configuring and enabling network interfaces...
==> k8s-node-1: Mounting shared folders...
    k8s-node-1: /vagrant => C:/Users/V01dDweller/Desktop/k8s-project
==> k8s-node-2: Importing base box 'ubuntu/jammy64'...
==> k8s-node-2: Matching MAC address for NAT networking...
==> k8s-node-2: Checking if box 'ubuntu/jammy64' version '20230428.0.0' is up to date...
==> k8s-node-2: Setting the name of the VM: k8s-project_k8s-node-2_1682904715092_91884
==> k8s-node-2: Fixed port collision for 22 => 2222. Now on port 2201.
==> k8s-node-2: Clearing any previously set network interfaces...
==> k8s-node-2: Preparing network interfaces based on configuration...
    k8s-node-2: Adapter 1: nat
    k8s-node-2: Adapter 2: hostonly
==> k8s-node-2: Forwarding ports...
    k8s-node-2: 22 (guest) => 2201 (host) (adapter 1)
==> k8s-node-2: Running 'pre-boot' VM customizations...
==> k8s-node-2: Booting VM...
==> k8s-node-2: Waiting for machine to boot. This may take a few minutes...
    k8s-node-2: SSH address: 127.0.0.1:2201
    k8s-node-2: SSH username: vagrant
    k8s-node-2: SSH auth method: private key
    k8s-node-2:
    k8s-node-2: Vagrant insecure key detected. Vagrant will automatically replace
    k8s-node-2: this with a newly generated keypair for better security.
    k8s-node-2:
    k8s-node-2: Inserting generated public key within guest...
==> k8s-node-2: Machine booted and ready!
==> k8s-node-2: Checking for guest additions in VM...
    k8s-node-2: The guest additions on this VM do not match the installed version of
    k8s-node-2: VirtualBox! In most cases this is fine, but in rare cases it can
    k8s-node-2: prevent things such as shared folders from working properly. If you see
    k8s-node-2: shared folder errors, please make sure the guest additions within the
    k8s-node-2: virtual machine match the version of VirtualBox you have installed on
    k8s-node-2: your host and reload your VM.
    k8s-node-2:
    k8s-node-2: Guest Additions Version: 6.0.0 r127566
    k8s-node-2: VirtualBox Version: 7.0
==> k8s-node-2: Setting hostname...
==> k8s-node-2: Configuring and enabling network interfaces...
==> k8s-node-2: Mounting shared folders...
    k8s-node-2: /vagrant => C:/Users/V01dDweller/Desktop/k8s-project
```

</details>

[modeline]: # ( vi: set number textwidth=78 colorcolumn=80 nowrap: )
